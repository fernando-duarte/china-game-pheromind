# China Economic Data Analysis

This package contains scripts to download, process, and analyze economic data for China from the World Bank and Penn World Table.

## Directory Structure

```
├── china_data_downloader.py  # Downloads raw economic data
├── china_data_processor.py   # Processes and analyzes the data
├── china_growth_model.md     # Documentation on China's growth model
├── output/                   # Directory for all output files
├── README.md                 # This documentation file
├── requirements.txt          # Python dependencies
├── dev-requirements.txt      # Development dependencies
├── setup.sh                  # Setup script for environment and execution
└── venv/                     # Python virtual environment (created by setup.sh)
```

## Overview

The package consists of two main Python scripts:

1. **china_data_downloader.py**: Downloads raw economic data from World Bank WDI and Penn World Table
2. **china_data_processor.py**: Processes the raw data, performs calculations, and generates analysis files

## Setup and Installation

### Prerequisites

- Python 3.7 or higher (Python 3.13+ recommended)
  - The script will work with either the `python3` or `python` command, as long as it's Python 3
- Internet connection (for downloading data)

### Installation

1. Open Terminal
2. Navigate to the `china_data` directory
3. Run the setup script:
   ```bash
   ./setup.sh
   ```

The setup script will:
- Create a Python virtual environment (if not already in one)
- Install all required dependencies
- Run the data downloader and processor scripts
- Store output files in the `output` directory

> **Note:** The setup script can be run from inside an existing virtual environment or from outside. If run from inside an existing virtual environment, it will use that environment instead of creating a new one.

### Setup Script Options

The setup script supports several command-line options:

```bash
./setup.sh --help
```

Options include:
- `--dev`: Install development dependencies
- `--skip-run`: Skip running the data scripts
- `-a=VALUE, --alpha=VALUE`: Capital share parameter for TFP calculation (default: 0.33)
- `-k=VALUE, --capital-output-ratio=VALUE`: Capital-to-output ratio for base year (default: 3.0)
- `-o=NAME, --output-file=NAME`: Base name for output files (default: china_data_processed)

Example:
```bash
./setup.sh -a=0.4 -k=2.5 -o=custom_output
```

This will run the setup process and pass the specified parameters to the processor script.

## Manual Setup

If you prefer to set up manually:

1. Create a virtual environment:
   ```bash
   python -m venv venv
   ```

   or

   ```bash
   python3 -m venv venv
   ```

2. Activate the virtual environment:
   - On macOS/Linux:
     ```bash
     source venv/bin/activate
     ```
   - On Windows:
     ```
     venv\Scripts\activate
     ```

3. Upgrade pip:
   ```bash
   pip install --upgrade pip
   ```

4. Install setuptools with distutils support:
   ```bash
   pip install setuptools>=67.0.0  # Required for pandas-datareader compatibility with Python 3.13+
   ```

5. Install dependencies (choose one option):

   For basic usage:
   ```bash
   pip install -r requirements.txt
   ```

   For development (includes testing tools):
   ```bash
   pip install -r dev-requirements.txt
   ```

6. Run the scripts:
   ```bash
   python china_data_downloader.py
   python china_data_processor.py
   ```

## Output Files

All output files will be stored in the `output` directory after running the scripts:

- `china_data_raw.md`: Raw data in markdown format (generated by downloader)
  - Contains original data from World Bank WDI and Penn World Table
  - Includes source attribution and data descriptions

- `china_data_processed.md`: Processed data in markdown format (generated by processor)
  - Contains transformed and calculated economic variables
  - Includes detailed documentation on calculation methods
  - Specifies which years are extrapolated for each variable
  - Groups extrapolation methods by type rather than by variable

- `china_data_processed.csv`: Processed data in CSV format (generated by processor)
  - Contains the same data as the markdown file but in CSV format for analysis

## Command-line Options

The processor script supports several command-line options:

```
python china_data_processor.py --help
```

Options include:
- `-i, --input-file`: Input file name (default: china_data_raw.md)
- `-a, --alpha`: Capital share parameter for TFP calculation (default: 0.33)
- `-o, --output-file`: Base name for output files (default: china_data_processed)
- `-k, --capital-output-ratio`: Capital-to-output ratio for base year 2017 (default: 3.0)

Example:
```
python china_data_processor.py -a 0.4 -k 2.5 -o custom_output
```

## Data Sources

The scripts retrieve and process data from the following sources:

- **World Bank World Development Indicators (WDI)**
  - GDP and its components (consumption, government, investment, exports, imports)
    - NY.GDP.MKTP.CD: GDP (current US$)
    - NE.CON.PRVT.CD: Household consumption (current US$)
    - NE.CON.GOVT.CD: Government consumption (current US$)
    - NE.GDI.TOTL.CD: Gross capital formation (current US$)
    - NE.EXP.GNFS.CD: Exports (current US$)
    - NE.IMP.GNFS.CD: Imports (current US$)
  - Foreign Direct Investment (FDI)
    - BX.KLT.DINV.CD.WD: Foreign direct investment in current dollars
  - Tax Revenue
    - GC.TAX.TOTL.GD.ZS: Tax revenue as percentage of GDP
  - Exchange Rates
    - PA.NUS.FCRF: Nominal exchange rates between CNY and USD
  - Population and labor force data
    - SP.POP.TOTL: Population, total
    - SL.TLF.TOTL.IN: Labor force, total

- **Penn World Table (PWT) version 10.01**
  - Real GDP (rgdpo)
  - Capital stock (rkna)
  - Price level (pl_gdpo)
  - Nominal GDP (cgdpo)
  - Human capital index (hc)

## Additional Documentation

The repository includes `china_growth_model.md` which provides additional context and documentation about China's economic growth model.

## License

This project is for educational purposes only.
